@page "/camera"
@using NoLock.Social.Core.Identity.Interfaces
@using Microsoft.Extensions.Logging
@inject ILoginAdapterService LoginService
@inject ILogger<Camera> Logger

<PageTitle>Camera</PageTitle>

<div class="container-fluid">
    <h1>Camera</h1>
    
    <NoLock.Social.Components.Camera.CameraCapture 
        AutoStart="true"
        OnImageCaptured="@HandleImageCaptured"
        OnError="@HandleError" />
</div>

@code {
    protected override void OnInitialized()
    {
        Logger.LogInformation("Camera page initialized.");
        base.OnInitialized();
    }
    
    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            Logger.LogInformation("Camera page first render.");
        }
        base.OnAfterRender(firstRender);
    }
    
    private void HandleImageCaptured(NoLock.Social.Core.Camera.Models.CapturedImage image)
    {
        Logger.LogInformation("Image captured: {ImageId}", image.Id);
    }
    
    private void HandleError(string error)
    {
        Logger.LogError("Camera error: {Error}", error);
    }
}